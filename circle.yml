machine:
  ruby:
    version: 2.3.0
test:
  override:
    - echo "test"
deployment:
  staging:
    branch: /feature.*|chore.*|enhancement.*/
    commands:
      - AWS_ACCESS_KEY_ID=${STAGING_AWS_ACCESS_KEY_ID} AWS_SECRET_ACCESS_KEY=${STAGING_AWS_SECRET_ACCESS_KEY} MM_ENV=staging bundle exec middleman s3_sync
  production:
    branch: master
    commands:
      - AWS_ACCESS_KEY_ID=${PRODUCTION_AWS_ACCESS_KEY_ID} AWS_SECRET_ACCESS_KEY=${PRODUCTION_AWS_SECRET_ACCESS_KEY} MM_ENV=production bundle exec middleman s3_sync
